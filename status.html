<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-sky-600 flex justify-center items-center min-h-screen">
    <div class="bg-gray-100 w-sm h-[815px] rounded-lg">
      <img src="resources/iPhone X.png" alt="" />
      <div class="h-[44px] bg-gray-100 flex items-center px-4 mb-5">
        <a class="text-blue-500 text-lg font-semibold" href="">Privacy</a>
        <h1 class="font-bold text-xl mx-22">Status</h1>
      </div>
      <div class="h-[76px] bg-white">
        <div class="h-full flex items-center px-4 gap-4">
          <img
            class="h-[56px] object-contain"
            src="resources/Oval 2.png"
            alt=""
          />
          <div>
            <h1 class="font-bold">My Status</h1>
            <p class="text-gray-500">Add to my status</p>
          </div>

          <img
            onclick="openCamera(this)"
            class="ml-13"
            src="resources/st cam.png"
            alt=""
          />

          <script>
            async function openCamera(imgEl) {
              if (
                !navigator.mediaDevices ||
                !navigator.mediaDevices.getUserMedia
              ) {
                alert("Camera not supported in this browser.");
                return;
              }

              let stream;
              try {
                stream = await navigator.mediaDevices.getUserMedia({
                  video: true,
                });
              } catch (e) {
                alert("Unable to access camera.");
                return;
              }

              const overlay = document.createElement("div");
              overlay.style =
                "position:fixed;inset:0;background:rgba(0,0,0,0.75);display:flex;align-items:center;justify-content:center;z-index:9999;";

              const container = document.createElement("div");
              container.style =
                "background:#000;padding:8px;border-radius:8px;display:flex;flex-direction:column;align-items:center;";

              const video = document.createElement("video");
              video.autoplay = true;
              video.playsInline = true;
              video.style =
                "max-width:90vw;max-height:70vh;border-radius:6px;display:block;";
              video.srcObject = stream;

              const controls = document.createElement("div");
              controls.style =
                "display:flex;gap:8px;justify-content:center;margin-top:8px;";

              const captureBtn = document.createElement("button");
              captureBtn.textContent = "Capture";
              const closeBtn = document.createElement("button");
              closeBtn.textContent = "Close";

              captureBtn.onclick = () => {
                const w = video.videoWidth || video.clientWidth;
                const h = video.videoHeight || video.clientHeight;
                const canvas = document.createElement("canvas");
                canvas.width = w;
                canvas.height = h;
                const ctx = canvas.getContext("2d");
                ctx.drawImage(video, 0, 0, w, h);
                imgEl.src = canvas.toDataURL("image/png");
                cleanup();
              };

              closeBtn.onclick = () => {
                cleanup();
              };

              function cleanup() {
                if (stream) {
                  stream.getTracks().forEach((t) => t.stop());
                  stream = null;
                }
                if (overlay.parentNode) overlay.parentNode.removeChild(overlay);
              }

              controls.appendChild(captureBtn);
              controls.appendChild(closeBtn);
              container.appendChild(video);
              container.appendChild(controls);
              overlay.appendChild(container);
              document.body.appendChild(overlay);
            }
          </script>
          <img src="resources/Editor.png" alt="" />
        </div>
      </div>
      <div class="bg-gray-100 h-[88px] fixed bottom-0 w-sm rounded-b-lg">
        <div class="flex items-center justify-between">
          <a href="status.html"
            ><img class="mx-auto pt-3" src="resources/Tab 9.png" alt=""
          /></a>
          <img class="mx-auto pt-3" src="resources/Tab 2.png" alt="" />
          <img
            onclick="openCamera(this)"
            class="mx-auto pt-3"
            src="resources/camera icon.png"
            alt=""
          />
          <a href="index.html">
            <img class="mx-auto pt-3" src="resources/Tab 15.png" alt=""
          /></a>
          <img class="mx-auto pt-3" src="resources/settings icon.png" alt="" />
        </div>
        <img class="block mx-auto pt-3" src="resources/Line.png" alt="" />
      </div>
    </div>
  </body>
</html>
